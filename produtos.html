<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meus Produtos - GigaProStore</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <header>
      <div class="header-left">
        <h1 class="logo">GigaProStore</h1>
        <nav>
          <a href="index.html">In√≠cio</a>
          <a href="cadastro.html">Cadastrar</a>
          <a href="produtos.html">Produtos</a>
        </nav>
      </div>
      <button class="theme-toggle">üåô</button>
    </header>

    <main>
      <div class="container">
        <h1>Meus Produtos</h1>
        <p class="slogan">Todos os seus produtos em um s√≥ lugar</p>

        <div id="productsContainer" class="products-grid"></div>
      </div>
    </main>

    <script src="script.js"></script>
    <script>
      async function loadProducts() {
        const container = document.getElementById('productsContainer')

        try {
          const response = await fetch('http://localhost:3000/products')

          if (!response.ok) {
            throw new Error('Erro ao buscar produtos')
          }

          const data = await response.json()

          if (data.length === 0) {
            container.innerHTML = `
              <div class="empty-state" style="grid-column: 1 / -1">
                <h2>Nenhum produto cadastrado</h2>
                <p>Comece a adicionar produtos agora mesmo!</p>
                <a href="cadastro.html" class="card-button" style="margin-top: 1rem">Cadastrar Produto</a>
              </div>
            `
            return
          }

          container.innerHTML = data.map(product => `
            <div class="product-card">
              <div class="product-name">${product.name}</div>
              <div class="product-price">R$ ${parseFloat(product.price).toFixed(2).replace('.', ',')}</div>
              <div class="product-info">
                <div><strong>Categoria:</strong> ${product.category}</div>
                <div><strong>Vendedor:</strong> ${product.email}</div>
                <div><strong>Descri√ß√£o:</strong> ${product.description}</div>
              </div>
            </div>
          `).join('')
        } catch (error) {
          console.error('Erro:', error)
          container.innerHTML = `
            <div class="empty-state" style="grid-column: 1 / -1">
              <h2>Erro ao carregar produtos</h2>
              <p>Verifique se o servidor est√° ativo e tente novamente</p>
              <button onclick="location.reload()" class="card-button" style="margin-top: 1rem">Tentar Novamente</button>
            </div>
          `
        }
      }

      document.addEventListener('DOMContentLoaded', loadProducts)
    </script>
  </body>
</html>